{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Bobing%20Corp/Desktop/bobing-ssot-new/lib/utils.js"],"sourcesContent":["// lib/utils.js\r\nexport const formatRupiah = (n) => {\r\n  return new Intl.NumberFormat('id-ID', {\r\n    style: 'currency',\r\n    currency: 'IDR',\r\n    minimumFractionDigits: 0\r\n  }).format(n);\r\n};\r\n\r\nexport const sizeRank = ['ALL','ALL SIZE','ALLSIZE','XXXS','XXS','XS','S','M','L','XL','XXL','2XL','3XL','XXXL','4XL','5XL'];\r\n\r\nexport const sortBySize = (variantA, variantB) => {\r\n  const sizeA = (variantA.size || '').toUpperCase().trim();\r\n  const sizeB = (variantB.size || '').toUpperCase().trim();\r\n  const idxA = sizeRank.indexOf(sizeA);\r\n  const idxB = sizeRank.indexOf(sizeB);\r\n  \r\n  if (idxA !== -1 && idxB !== -1) return idxA - idxB;\r\n  if (idxA !== -1) return -1; \r\n  if (idxB !== -1) return 1;\r\n  \r\n  const colorCompare = (variantA.color || '').localeCompare(variantB.color || '');\r\n  if (colorCompare !== 0) return colorCompare;\r\n  \r\n  return (variantA.sku || '').localeCompare(variantB.sku || '');\r\n};"],"names":[],"mappings":"AAAA,eAAe;;;;;;;;;AACR,MAAM,eAAe,CAAC;IAC3B,OAAO,IAAI,KAAK,YAAY,CAAC,SAAS;QACpC,OAAO;QACP,UAAU;QACV,uBAAuB;IACzB,GAAG,MAAM,CAAC;AACZ;AAEO,MAAM,WAAW;IAAC;IAAM;IAAW;IAAU;IAAO;IAAM;IAAK;IAAI;IAAI;IAAI;IAAK;IAAM;IAAM;IAAM;IAAO;IAAM;CAAM;AAErH,MAAM,aAAa,CAAC,UAAU;IACnC,MAAM,QAAQ,CAAC,SAAS,IAAI,IAAI,EAAE,EAAE,WAAW,GAAG,IAAI;IACtD,MAAM,QAAQ,CAAC,SAAS,IAAI,IAAI,EAAE,EAAE,WAAW,GAAG,IAAI;IACtD,MAAM,OAAO,SAAS,OAAO,CAAC;IAC9B,MAAM,OAAO,SAAS,OAAO,CAAC;IAE9B,IAAI,SAAS,CAAC,KAAK,SAAS,CAAC,GAAG,OAAO,OAAO;IAC9C,IAAI,SAAS,CAAC,GAAG,OAAO,CAAC;IACzB,IAAI,SAAS,CAAC,GAAG,OAAO;IAExB,MAAM,eAAe,CAAC,SAAS,KAAK,IAAI,EAAE,EAAE,aAAa,CAAC,SAAS,KAAK,IAAI;IAC5E,IAAI,iBAAiB,GAAG,OAAO;IAE/B,OAAO,CAAC,SAAS,GAAG,IAAI,EAAE,EAAE,aAAa,CAAC,SAAS,GAAG,IAAI;AAC5D"}},
    {"offset": {"line": 57, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Bobing%20Corp/Desktop/bobing-ssot-new/components/finance/CashFlowView.js"],"sourcesContent":["// app/cash/page.js\r\n\"use client\";\r\nimport { useState, useEffect } from 'react';\r\nimport { db, auth } from '@/lib/firebase';\r\nimport { collection, getDocs, doc, runTransaction, query, orderBy, limit, serverTimestamp } from 'firebase/firestore';\r\nimport { formatRupiah } from '@/lib/utils';\r\n\r\nexport default function CashFlowPage() {\r\n    const [accounts, setAccounts] = useState([]);\r\n    const [transactions, setTransactions] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [summary, setSummary] = useState({ in: 0, out: 0 });\r\n    \r\n    const [modalExpOpen, setModalExpOpen] = useState(false);\r\n    const [modalTfOpen, setModalTfOpen] = useState(false);\r\n    const [formData, setFormData] = useState({ type: 'out', account_id: '', category: '', amount: '', description: '', date: '' });\r\n    const [tfData, setTfData] = useState({ from: '', to: '', amount: '', note: '' });\r\n    const [categories, setCategories] = useState([]);\r\n\r\n    useEffect(() => { fetchData(); }, []);\r\n\r\n    const fetchData = async () => {\r\n        try {\r\n            const [accSnap, coaSnap] = await Promise.all([\r\n                getDocs(query(collection(db, \"cash_accounts\"), orderBy(\"created_at\"))),\r\n                getDocs(query(collection(db, \"chart_of_accounts\"), orderBy(\"code\")))\r\n            ]);\r\n            const accList = []; accSnap.forEach(d => accList.push({id:d.id, ...d.data()}));\r\n            setAccounts(accList);\r\n            const cats = []; coaSnap.forEach(d => { const c = d.data(); if(c.category.includes('Beban') || c.category.includes('Pendapatan')) cats.push(c); });\r\n            setCategories(cats);\r\n            await fetchTransactions();\r\n        } catch(e) { console.error(e); } finally { setLoading(false); }\r\n    };\r\n\r\n    const fetchTransactions = async () => {\r\n        const q = query(collection(db, \"cash_transactions\"), orderBy(\"date\", \"desc\"), limit(50));\r\n        const snap = await getDocs(q);\r\n        const list = []; let totalIn = 0, totalOut = 0;\r\n        snap.forEach(d => {\r\n            const t = d.data();\r\n            list.push({id: d.id, ...t});\r\n            if(t.type === 'in') totalIn += (t.amount||0); else totalOut += (t.amount||0);\r\n        });\r\n        setTransactions(list);\r\n        setSummary({ in: totalIn, out: totalOut });\r\n    };\r\n\r\n    const submitTransaction = async (e) => {\r\n        e.preventDefault();\r\n        try {\r\n            const amt = parseInt(formData.amount);\r\n            await runTransaction(db, async (t) => {\r\n                const ref = doc(collection(db, \"cash_transactions\"));\r\n                t.set(ref, { ...formData, amount: amt, date: new Date(formData.date), created_at: serverTimestamp(), ref_type: 'manual_entry' });\r\n                const accRef = doc(db, \"cash_accounts\", formData.account_id);\r\n                const accDoc = await t.get(accRef);\r\n                const newBal = formData.type === 'in' ? (accDoc.data().balance||0) + amt : (accDoc.data().balance||0) - amt;\r\n                t.update(accRef, { balance: newBal });\r\n            });\r\n            setModalExpOpen(false); fetchData();\r\n        } catch(e) { alert(e.message); }\r\n    };\r\n\r\n    const submitTransfer = async (e) => {\r\n        e.preventDefault();\r\n        if(tfData.from === tfData.to) return alert(\"Akun sama!\");\r\n        try {\r\n            const amt = parseInt(tfData.amount);\r\n            await runTransaction(db, async (t) => {\r\n                const fromRef = doc(db, \"cash_accounts\", tfData.from);\r\n                const toRef = doc(db, \"cash_accounts\", tfData.to);\r\n                const fromDoc = await t.get(fromRef); const toDoc = await t.get(toRef);\r\n                t.update(fromRef, { balance: (fromDoc.data().balance||0) - amt });\r\n                t.update(toRef, { balance: (toDoc.data().balance||0) + amt });\r\n                const logRef = doc(collection(db, \"cash_transactions\"));\r\n                t.set(logRef, { type: 'transfer', amount: amt, date: serverTimestamp(), description: `To ${toDoc.data().name}: ${tfData.note}`, account_id: tfData.from, ref_type: 'transfer_out' });\r\n                const logRefIn = doc(collection(db, \"cash_transactions\"));\r\n                t.set(logRefIn, { type: 'transfer', amount: amt, date: serverTimestamp(), description: `From ${fromDoc.data().name}: ${tfData.note}`, account_id: tfData.to, ref_type: 'transfer_in' });\r\n            });\r\n            setModalTfOpen(false); fetchData();\r\n        } catch(e) { alert(e.message); }\r\n    };\r\n\r\n    return (\r\n        <div className=\"max-w-7xl mx-auto space-y-8 fade-in pb-20\">\r\n            <div className=\"flex justify-between items-center\">\r\n                <div>\r\n                    <h2 className=\"text-2xl font-bold text-gray-900\">Cash Flow</h2>\r\n                    <p className=\"text-sm text-gray-500\">Manage wallets & transactions.</p>\r\n                </div>\r\n                <div className=\"flex gap-2\">\r\n                    <button onClick={() => setModalTfOpen(true)} className=\"btn-secondary\">Transfer</button>\r\n                    <button onClick={() => { setFormData({type:'out', date: new Date().toISOString().split('T')[0], account_id:'', category:'', amount:'', description:''}); setModalExpOpen(true); }} className=\"btn-primary\">Record Transaction</button>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n                {accounts.map(acc => (\r\n                    <div key={acc.id} className=\"card p-6 flex flex-col justify-between relative overflow-hidden group hover:border-brand-200\">\r\n                        <div>\r\n                            <p className=\"text-xs font-bold text-gray-400 uppercase tracking-wider mb-1\">{acc.name}</p>\r\n                            <h3 className=\"text-2xl font-extrabold text-gray-900\">{formatRupiah(acc.balance)}</h3>\r\n                        </div>\r\n                        <div className=\"mt-4 flex items-center gap-2 text-xs text-gray-400\">\r\n                            <span className=\"bg-gray-100 px-2 py-0.5 rounded font-mono\">{acc.code}</span>\r\n                        </div>\r\n                        <div className=\"absolute right-0 top-0 p-4 opacity-10 group-hover:opacity-20 transition-opacity\">\r\n                            <svg className=\"w-16 h-16 text-brand-600\" fill=\"currentColor\" viewBox=\"0 0 20 20\"><path d=\"M4 4a2 2 0 00-2 2v1h16V6a2 2 0 00-2-2H4z\"/><path fillRule=\"evenodd\" d=\"M18 9H2v5a2 2 0 002 2h12a2 2 0 002-2V9zM4 13a1 1 0 011-1h1a1 1 0 110 2H5a1 1 0 01-1-1zm5-1a1 1 0 100 2h1a1 1 0 100-2H9z\" clipRule=\"evenodd\"/></svg>\r\n                        </div>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n\r\n            <div className=\"card p-0 overflow-hidden\">\r\n                <div className=\"px-6 py-4 border-b border-gray-100 bg-gray-50/50 flex justify-between items-center\">\r\n                    <h3 className=\"font-bold text-gray-700 text-sm uppercase tracking-wider\">Recent Transactions</h3>\r\n                    <div className=\"text-xs font-medium text-gray-500\">Last 50 entries</div>\r\n                </div>\r\n                <div className=\"table-wrapper border-0 shadow-none rounded-none\">\r\n                    <table className=\"table-modern\">\r\n                        <thead><tr><th className=\"pl-6\">Date</th><th>Wallet</th><th>Category</th><th>Description</th><th className=\"text-right pr-6\">Amount</th></tr></thead>\r\n                        <tbody>\r\n                            {transactions.map(t => {\r\n                                const isInc = t.type === 'in' || t.ref_type === 'transfer_in';\r\n                                return (\r\n                                    <tr key={t.id}>\r\n                                        <td className=\"pl-6 font-mono text-xs text-gray-500\">{new Date(t.date.toDate()).toLocaleDateString()}</td>\r\n                                        <td className=\"font-bold text-gray-700 text-xs\">{accounts.find(a=>a.id===t.account_id)?.name || 'Unknown'}</td>\r\n                                        <td><span className=\"badge badge-neutral\">{t.category || 'General'}</span></td>\r\n                                        <td className=\"text-gray-600 truncate max-w-xs\">{t.description}</td>\r\n                                        <td className={`text-right pr-6 font-mono font-bold ${isInc ? 'text-emerald-600' : 'text-gray-900'}`}>\r\n                                            {isInc ? '+' : '-'}{formatRupiah(t.amount)}\r\n                                        </td>\r\n                                    </tr>\r\n                                );\r\n                            })}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Modal Expense */}\r\n            {modalExpOpen && (\r\n                <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-gray-900/40 backdrop-blur-sm p-4\">\r\n                    <div className=\"bg-white rounded-2xl shadow-xl max-w-md w-full p-6 fade-in-up\">\r\n                        <h3 className=\"text-lg font-bold text-gray-900 mb-6\">Record Transaction</h3>\r\n                        <form onSubmit={submitTransaction} className=\"space-y-4\">\r\n                            <div className=\"grid grid-cols-2 gap-4\">\r\n                                <input type=\"date\" required className=\"input-field\" value={formData.date} onChange={e=>setFormData({...formData, date:e.target.value})} />\r\n                                <select className=\"select-field font-bold\" value={formData.type} onChange={e=>setFormData({...formData, type:e.target.value})}>\r\n                                    <option value=\"out\">Expense (Keluar)</option>\r\n                                    <option value=\"in\">Income (Masuk)</option>\r\n                                </select>\r\n                            </div>\r\n                            <select required className=\"select-field\" value={formData.account_id} onChange={e=>setFormData({...formData, account_id:e.target.value})}>\r\n                                <option value=\"\">-- Select Wallet --</option>\r\n                                {accounts.map(a=><option key={a.id} value={a.id}>{a.name}</option>)}\r\n                            </select>\r\n                            <select required className=\"select-field\" value={formData.category} onChange={e=>setFormData({...formData, category:e.target.value})}>\r\n                                <option value=\"\">-- Select Category --</option>\r\n                                {categories.map(c=><option key={c.id} value={c.name}>{c.name}</option>)}\r\n                                <option value=\"Lainnya\">Lainnya</option>\r\n                            </select>\r\n                            <input required className=\"input-field\" placeholder=\"Description...\" value={formData.description} onChange={e=>setFormData({...formData, description:e.target.value})} />\r\n                            <input type=\"number\" required className=\"input-field font-bold text-lg text-brand-600\" placeholder=\"Amount (Rp)\" value={formData.amount} onChange={e=>setFormData({...formData, amount:e.target.value})} />\r\n                            \r\n                            <div className=\"flex justify-end gap-3 pt-4\">\r\n                                <button type=\"button\" onClick={()=>setModalExpOpen(false)} className=\"btn-ghost\">Cancel</button>\r\n                                <button type=\"submit\" className=\"btn-primary\">Save Record</button>\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* Modal Transfer */}\r\n            {modalTfOpen && (\r\n                <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-gray-900/40 backdrop-blur-sm p-4\">\r\n                    <div className=\"bg-white rounded-2xl shadow-xl max-w-md w-full p-6 fade-in-up\">\r\n                        <h3 className=\"text-lg font-bold text-gray-900 mb-6\">Transfer Funds</h3>\r\n                        <form onSubmit={submitTransfer} className=\"space-y-4\">\r\n                            <div className=\"grid grid-cols-2 gap-4\">\r\n                                <div><label className=\"text-xs font-bold text-gray-500 uppercase mb-1\">From</label><select required className=\"select-field bg-red-50\" value={tfData.from} onChange={e=>setTfData({...tfData, from:e.target.value})}><option value=\"\">Select</option>{accounts.map(a=><option key={a.id} value={a.id}>{a.name}</option>)}</select></div>\r\n                                <div><label className=\"text-xs font-bold text-gray-500 uppercase mb-1\">To</label><select required className=\"select-field bg-emerald-50\" value={tfData.to} onChange={e=>setTfData({...tfData, to:e.target.value})}><option value=\"\">Select</option>{accounts.map(a=><option key={a.id} value={a.id}>{a.name}</option>)}</select></div>\r\n                            </div>\r\n                            <input type=\"number\" required className=\"input-field font-bold text-lg\" placeholder=\"Amount\" value={tfData.amount} onChange={e=>setTfData({...tfData, amount:e.target.value})} />\r\n                            <input className=\"input-field\" placeholder=\"Notes...\" value={tfData.note} onChange={e=>setTfData({...tfData, note:e.target.value})} />\r\n                            <div className=\"flex justify-end gap-3 pt-4\">\r\n                                <button type=\"button\" onClick={()=>setModalTfOpen(false)} className=\"btn-ghost\">Cancel</button>\r\n                                <button type=\"submit\" className=\"btn-primary\">Transfer</button>\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 972, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Bobing%20Corp/Desktop/bobing-ssot-new/components/finance/ProfitLossView.js"],"sourcesContent":["// app/finance-reports/page.js\r\n\"use client\";\r\nimport { useState, useEffect } from 'react';\r\nimport { db } from '@/lib/firebase';\r\nimport { collection, getDocs, query, where } from 'firebase/firestore';\r\nimport { formatRupiah } from '@/lib/utils';\r\n\r\nexport default function ReportPLPage() {\r\n    const [data, setData] = useState({ revenue: 0, cogs: 0, expenses: 0, details: {} });\r\n    const [loading, setLoading] = useState(false);\r\n    const [range, setRange] = useState({ \r\n        start: new Date(new Date().getFullYear(), new Date().getMonth(), 1).toISOString().split('T')[0], \r\n        end: new Date(new Date().getFullYear(), new Date().getMonth() + 1, 0).toISOString().split('T')[0] \r\n    });\r\n\r\n    const generateReport = async () => {\r\n        setLoading(true);\r\n        const start = new Date(range.start); start.setHours(0,0,0,0);\r\n        const end = new Date(range.end); end.setHours(23,59,59,999);\r\n\r\n        try {\r\n            const qSales = query(collection(db, \"sales_orders\"), where(\"order_date\", \">=\", start), where(\"order_date\", \"<=\", end));\r\n            const snapSales = await getDocs(qSales);\r\n            let rev = 0, cogs = 0;\r\n            snapSales.forEach(d => { const s = d.data(); rev += (s.net_amount || 0); cogs += (s.total_cost || 0); });\r\n\r\n            const qExp = query(collection(db, \"cash_transactions\"), where(\"date\", \">=\", start), where(\"date\", \"<=\", end), where(\"type\", \"==\", \"out\"));\r\n            const snapExp = await getDocs(qExp);\r\n            let expTotal = 0; const expDet = {};\r\n            const exclude = ['pembelian', 'transfer', 'prive']; \r\n            snapExp.forEach(d => {\r\n                const t = d.data(); const cat = (t.category || 'Lainnya').toLowerCase();\r\n                if(!exclude.includes(cat)) { expTotal += t.amount; expDet[cat] = (expDet[cat] || 0) + t.amount; }\r\n            });\r\n            setData({ revenue: rev, cogs: cogs, expenses: expTotal, details: expDet });\r\n        } catch(e) { console.error(e); } finally { setLoading(false); }\r\n    };\r\n\r\n    useEffect(() => { generateReport(); }, []);\r\n\r\n    const gross = data.revenue - data.cogs;\r\n    const net = gross - data.expenses;\r\n    const margin = data.revenue > 0 ? (net / data.revenue) * 100 : 0;\r\n\r\n    return (\r\n        <div className=\"max-w-3xl mx-auto space-y-8 fade-in pb-20\">\r\n            <div className=\"flex justify-between items-end\">\r\n                <div>\r\n                    <h2 className=\"text-2xl font-bold text-gray-900\">Profit & Loss</h2>\r\n                    <p className=\"text-sm text-gray-500\">Financial performance report.</p>\r\n                </div>\r\n                <div className=\"flex gap-2 bg-white p-1 rounded-lg border border-gray-200 shadow-sm\">\r\n                    <input type=\"date\" className=\"text-sm border-none bg-transparent focus:ring-0 text-gray-600\" value={range.start} onChange={e=>setRange({...range, start:e.target.value})} />\r\n                    <span className=\"self-center text-gray-300\">-</span>\r\n                    <input type=\"date\" className=\"text-sm border-none bg-transparent focus:ring-0 text-gray-600\" value={range.end} onChange={e=>setRange({...range, end:e.target.value})} />\r\n                    <button onClick={generateReport} className=\"bg-brand-600 text-white px-3 py-1 rounded-md text-xs font-bold hover:bg-brand-700\">{loading ? '...' : 'Go'}</button>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"card p-8 space-y-6 border-t-4 border-t-brand-500\">\r\n                {/* REVENUE */}\r\n                <div>\r\n                    <h3 className=\"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3 border-b border-gray-100 pb-2\">Revenue</h3>\r\n                    <div className=\"flex justify-between items-center\">\r\n                        <span className=\"font-medium text-gray-700\">Net Sales</span>\r\n                        <span className=\"font-bold text-lg text-gray-900\">{formatRupiah(data.revenue)}</span>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* COGS */}\r\n                <div>\r\n                    <h3 className=\"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3 border-b border-gray-100 pb-2\">Cost of Goods Sold</h3>\r\n                    <div className=\"flex justify-between items-center\">\r\n                        <span className=\"font-medium text-gray-700\">HPP Product</span>\r\n                        <span className=\"font-bold text-lg text-red-500\">({formatRupiah(data.cogs)})</span>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* GROSS PROFIT */}\r\n                <div className=\"bg-brand-50/50 p-4 rounded-xl border border-brand-100 flex justify-between items-center\">\r\n                    <span className=\"font-bold text-brand-900 text-sm uppercase tracking-wide\">Gross Profit</span>\r\n                    <span className=\"font-extrabold text-xl text-brand-700\">{formatRupiah(gross)}</span>\r\n                </div>\r\n\r\n                {/* EXPENSES */}\r\n                <div>\r\n                    <h3 className=\"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3 border-b border-gray-100 pb-2\">Operating Expenses</h3>\r\n                    <div className=\"space-y-2 pl-2 mb-4\">\r\n                        {Object.entries(data.details).map(([k, v]) => (\r\n                            <div key={k} className=\"flex justify-between text-sm\">\r\n                                <span className=\"capitalize text-gray-600\">{k}</span>\r\n                                <span className=\"font-mono text-gray-800\">{formatRupiah(v)}</span>\r\n                            </div>\r\n                        ))}\r\n                        {data.expenses === 0 && <p className=\"text-sm text-gray-400 italic\">No expenses recorded.</p>}\r\n                    </div>\r\n                    <div className=\"flex justify-between items-center border-t border-gray-100 pt-3\">\r\n                        <span className=\"font-bold text-gray-700 text-sm\">Total Expenses</span>\r\n                        <span className=\"font-bold text-red-500\">({formatRupiah(data.expenses)})</span>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* NET PROFIT */}\r\n                <div className=\"bg-gray-900 text-white p-6 rounded-xl shadow-lg flex justify-between items-center relative overflow-hidden\">\r\n                    <div className=\"relative z-10\">\r\n                        <span className=\"block text-gray-400 text-xs font-bold uppercase tracking-widest mb-1\">Net Profit</span>\r\n                        <span className={`text-3xl font-extrabold tracking-tight ${net < 0 ? 'text-red-400' : 'text-emerald-400'}`}>{formatRupiah(net)}</span>\r\n                    </div>\r\n                    <div className=\"relative z-10 text-right\">\r\n                        <span className=\"block text-gray-400 text-xs\">Net Margin</span>\r\n                        <span className={`text-xl font-bold ${margin >= 0 ? 'text-emerald-400' : 'text-red-400'}`}>{margin.toFixed(1)}%</span>\r\n                    </div>\r\n                    <div className=\"absolute -right-6 -bottom-10 w-32 h-32 bg-white/5 rounded-full blur-2xl\"></div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1437, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Bobing%20Corp/Desktop/bobing-ssot-new/components/finance/BalanceSheetView.js"],"sourcesContent":["// app/finance-balance/page.js\r\n\"use client\";\r\nimport { useState, useEffect } from 'react';\r\nimport { db } from '@/lib/firebase';\r\nimport { collection, getDocs, query, where } from 'firebase/firestore';\r\nimport { formatRupiah } from '@/lib/utils';\r\n\r\nexport default function BalanceSheetPage() {\r\n    const [assets, setAssets] = useState({ cash: 0, inventory: 0, receivable: 0, listCash: [] });\r\n    const [liabilities, setLiabilities] = useState({ payable: 0 });\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => { calculate(); }, []);\r\n\r\n    const calculate = async () => {\r\n        setLoading(true);\r\n        try {\r\n            const snapCash = await getDocs(collection(db, \"cash_accounts\"));\r\n            let totalCash = 0; const listCash = [];\r\n            snapCash.forEach(doc => { const d = doc.data(); totalCash += (d.balance || 0); listCash.push({ name: d.name, val: d.balance || 0 }); });\r\n\r\n            const [snapSnap, snapVar] = await Promise.all([getDocs(collection(db, \"stock_snapshots\")), getDocs(collection(db, \"product_variants\"))]);\r\n            const costMap = {}; snapVar.forEach(d => costMap[d.id] = d.data().cost || 0);\r\n            let totalInv = 0; snapSnap.forEach(doc => { const d = doc.data(); if(d.qty > 0) totalInv += (d.qty * (costMap[d.variant_id] || 0)); });\r\n\r\n            const snapPiutang = await getDocs(query(collection(db, \"sales_orders\"), where(\"payment_status\", \"==\", \"unpaid\")));\r\n            let totalPiutang = 0; snapPiutang.forEach(d => totalPiutang += (d.data().net_amount || 0));\r\n\r\n            const snapHutang = await getDocs(query(collection(db, \"purchase_orders\"), where(\"payment_status\", \"==\", \"unpaid\")));\r\n            let totalHutang = 0; snapHutang.forEach(d => totalHutang += (d.data().total_amount || 0));\r\n\r\n            setAssets({ cash: totalCash, inventory: totalInv, receivable: totalPiutang, listCash });\r\n            setLiabilities({ payable: totalHutang });\r\n        } catch(e) { console.error(e); } finally { setLoading(false); }\r\n    };\r\n\r\n    const totalAssets = assets.cash + assets.inventory + assets.receivable;\r\n    const equity = totalAssets - liabilities.payable;\r\n\r\n    return (\r\n        <div className=\"max-w-6xl mx-auto space-y-8 fade-in pb-20\">\r\n            <div className=\"flex justify-between items-center\">\r\n                <div>\r\n                    <h2 className=\"text-2xl font-bold text-gray-900\">Balance Sheet</h2>\r\n                    <p className=\"text-sm text-gray-500\">Real-time financial position.</p>\r\n                </div>\r\n                <button onClick={calculate} className=\"btn-secondary text-xs\">Refresh</button>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                {/* ASSETS */}\r\n                <div className=\"card p-0 overflow-hidden\">\r\n                    <div className=\"px-6 py-4 border-b border-gray-100 bg-emerald-50/50\">\r\n                        <h3 className=\"font-bold text-emerald-800 uppercase tracking-wider text-xs\">Assets (Harta)</h3>\r\n                    </div>\r\n                    <div className=\"p-6 space-y-6\">\r\n                        <div>\r\n                            <p className=\"text-xs font-bold text-gray-400 uppercase mb-2\">Cash & Bank</p>\r\n                            <div className=\"space-y-2 pl-3 border-l-2 border-gray-100\">\r\n                                {assets.listCash.map((c, i) => (\r\n                                    <div key={i} className=\"flex justify-between text-sm\">\r\n                                        <span className=\"text-gray-600\">{c.name}</span>\r\n                                        <span className=\"font-mono font-medium\">{formatRupiah(c.val)}</span>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                            <div className=\"flex justify-between items-center mt-3 pt-3 border-t border-dashed border-gray-200 font-bold text-gray-700\">\r\n                                <span>Total Cash</span><span>{formatRupiah(assets.cash)}</span>\r\n                            </div>\r\n                        </div>\r\n                        <div>\r\n                            <p className=\"text-xs font-bold text-gray-400 uppercase mb-2\">Inventory</p>\r\n                            <div className=\"flex justify-between items-center pl-3 border-l-2 border-blue-100\">\r\n                                <span className=\"text-sm text-gray-600\">Stock Value (At Cost)</span>\r\n                                <span className=\"font-bold text-gray-800\">{formatRupiah(assets.inventory)}</span>\r\n                            </div>\r\n                        </div>\r\n                        <div>\r\n                            <p className=\"text-xs font-bold text-gray-400 uppercase mb-2\">Receivables</p>\r\n                            <div className=\"flex justify-between items-center pl-3 border-l-2 border-amber-100\">\r\n                                <span className=\"text-sm text-gray-600\">Unpaid Sales</span>\r\n                                <span className=\"font-bold text-gray-800\">{formatRupiah(assets.receivable)}</span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-between items-center\">\r\n                        <span className=\"font-bold text-gray-800\">TOTAL ASSETS</span>\r\n                        <span className=\"font-extrabold text-emerald-600 text-xl\">{formatRupiah(totalAssets)}</span>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"space-y-6\">\r\n                    {/* LIABILITIES */}\r\n                    <div className=\"card p-0 overflow-hidden\">\r\n                        <div className=\"px-6 py-4 border-b border-gray-100 bg-red-50/50\">\r\n                            <h3 className=\"font-bold text-red-800 uppercase tracking-wider text-xs\">Liabilities (Hutang)</h3>\r\n                        </div>\r\n                        <div className=\"p-6\">\r\n                            <div className=\"flex justify-between items-center pl-3 border-l-2 border-red-100\">\r\n                                <span className=\"text-sm text-gray-600\">Accounts Payable (PO)</span>\r\n                                <span className=\"font-bold text-red-600\">{formatRupiah(liabilities.payable)}</span>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-between items-center\">\r\n                            <span className=\"font-bold text-gray-800\">TOTAL LIABILITIES</span>\r\n                            <span className=\"font-bold text-red-600 text-lg\">{formatRupiah(liabilities.payable)}</span>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* EQUITY */}\r\n                    <div className=\"card p-6 bg-gray-900 text-white text-center relative overflow-hidden border-none\">\r\n                        <p className=\"text-xs text-gray-400 uppercase tracking-widest mb-2\">Owners Equity</p>\r\n                        <h3 className={`text-3xl font-extrabold tracking-tight ${equity >= 0 ? 'text-white' : 'text-red-400'}`}>\r\n                            {formatRupiah(equity)}\r\n                        </h3>\r\n                        <p className=\"text-xs text-gray-500 mt-2\">Assets - Liabilities</p>\r\n                        <div className=\"absolute top-0 right-0 w-24 h-24 bg-brand-500/10 rounded-full blur-2xl\"></div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}"],"names":[],"mappings":"AAAA,8BAA8B;;;;;;AAE9B;AACA;AACA;AAAA;AACA;;;AAJA;;;;;AAMe,SAAS;;IACpB,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAAC;QAAE,MAAM;QAAG,WAAW;QAAG,YAAY;QAAG,UAAU,EAAE;IAAC;IAC1F,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAAC;QAAE,SAAS;IAAE;IAC5D,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IAEvC,IAAA,0KAAS;sCAAC;YAAQ;QAAa;qCAAG,EAAE;IAEpC,MAAM,YAAY;QACd,WAAW;QACX,IAAI;YACA,MAAM,WAAW,MAAM,IAAA,iLAAO,EAAC,IAAA,oLAAU,EAAC,wHAAE,EAAE;YAC9C,IAAI,YAAY;YAAG,MAAM,WAAW,EAAE;YACtC,SAAS,OAAO,CAAC,CAAA;gBAAS,MAAM,IAAI,IAAI,IAAI;gBAAI,aAAc,EAAE,OAAO,IAAI;gBAAI,SAAS,IAAI,CAAC;oBAAE,MAAM,EAAE,IAAI;oBAAE,KAAK,EAAE,OAAO,IAAI;gBAAE;YAAI;YAErI,MAAM,CAAC,UAAU,QAAQ,GAAG,MAAM,QAAQ,GAAG,CAAC;gBAAC,IAAA,iLAAO,EAAC,IAAA,oLAAU,EAAC,wHAAE,EAAE;gBAAqB,IAAA,iLAAO,EAAC,IAAA,oLAAU,EAAC,wHAAE,EAAE;aAAqB;YACvI,MAAM,UAAU,CAAC;YAAG,QAAQ,OAAO,CAAC,CAAA,IAAK,OAAO,CAAC,EAAE,EAAE,CAAC,GAAG,EAAE,IAAI,GAAG,IAAI,IAAI;YAC1E,IAAI,WAAW;YAAG,SAAS,OAAO,CAAC,CAAA;gBAAS,MAAM,IAAI,IAAI,IAAI;gBAAI,IAAG,EAAE,GAAG,GAAG,GAAG,YAAa,EAAE,GAAG,GAAG,CAAC,OAAO,CAAC,EAAE,UAAU,CAAC,IAAI,CAAC;YAAI;YAEpI,MAAM,cAAc,MAAM,IAAA,iLAAO,EAAC,IAAA,+KAAK,EAAC,IAAA,oLAAU,EAAC,wHAAE,EAAE,iBAAiB,IAAA,+KAAK,EAAC,kBAAkB,MAAM;YACtG,IAAI,eAAe;YAAG,YAAY,OAAO,CAAC,CAAA,IAAK,gBAAiB,EAAE,IAAI,GAAG,UAAU,IAAI;YAEvF,MAAM,aAAa,MAAM,IAAA,iLAAO,EAAC,IAAA,+KAAK,EAAC,IAAA,oLAAU,EAAC,wHAAE,EAAE,oBAAoB,IAAA,+KAAK,EAAC,kBAAkB,MAAM;YACxG,IAAI,cAAc;YAAG,WAAW,OAAO,CAAC,CAAA,IAAK,eAAgB,EAAE,IAAI,GAAG,YAAY,IAAI;YAEtF,UAAU;gBAAE,MAAM;gBAAW,WAAW;gBAAU,YAAY;gBAAc;YAAS;YACrF,eAAe;gBAAE,SAAS;YAAY;QAC1C,EAAE,OAAM,GAAG;YAAE,QAAQ,KAAK,CAAC;QAAI,SAAU;YAAE,WAAW;QAAQ;IAClE;IAEA,MAAM,cAAc,OAAO,IAAI,GAAG,OAAO,SAAS,GAAG,OAAO,UAAU;IACtE,MAAM,SAAS,cAAc,YAAY,OAAO;IAEhD,qBACI,6LAAC;QAAI,WAAU;;0BACX,6LAAC;gBAAI,WAAU;;kCACX,6LAAC;;0CACG,6LAAC;gCAAG,WAAU;0CAAmC;;;;;;0CACjD,6LAAC;gCAAE,WAAU;0CAAwB;;;;;;;;;;;;kCAEzC,6LAAC;wBAAO,SAAS;wBAAW,WAAU;kCAAwB;;;;;;;;;;;;0BAGlE,6LAAC;gBAAI,WAAU;;kCAEX,6LAAC;wBAAI,WAAU;;0CACX,6LAAC;gCAAI,WAAU;0CACX,cAAA,6LAAC;oCAAG,WAAU;8CAA8D;;;;;;;;;;;0CAEhF,6LAAC;gCAAI,WAAU;;kDACX,6LAAC;;0DACG,6LAAC;gDAAE,WAAU;0DAAiD;;;;;;0DAC9D,6LAAC;gDAAI,WAAU;0DACV,OAAO,QAAQ,CAAC,GAAG,CAAC,CAAC,GAAG,kBACrB,6LAAC;wDAAY,WAAU;;0EACnB,6LAAC;gEAAK,WAAU;0EAAiB,EAAE,IAAI;;;;;;0EACvC,6LAAC;gEAAK,WAAU;0EAAyB,IAAA,+HAAY,EAAC,EAAE,GAAG;;;;;;;uDAFrD;;;;;;;;;;0DAMlB,6LAAC;gDAAI,WAAU;;kEACX,6LAAC;kEAAK;;;;;;kEAAiB,6LAAC;kEAAM,IAAA,+HAAY,EAAC,OAAO,IAAI;;;;;;;;;;;;;;;;;;kDAG9D,6LAAC;;0DACG,6LAAC;gDAAE,WAAU;0DAAiD;;;;;;0DAC9D,6LAAC;gDAAI,WAAU;;kEACX,6LAAC;wDAAK,WAAU;kEAAwB;;;;;;kEACxC,6LAAC;wDAAK,WAAU;kEAA2B,IAAA,+HAAY,EAAC,OAAO,SAAS;;;;;;;;;;;;;;;;;;kDAGhF,6LAAC;;0DACG,6LAAC;gDAAE,WAAU;0DAAiD;;;;;;0DAC9D,6LAAC;gDAAI,WAAU;;kEACX,6LAAC;wDAAK,WAAU;kEAAwB;;;;;;kEACxC,6LAAC;wDAAK,WAAU;kEAA2B,IAAA,+HAAY,EAAC,OAAO,UAAU;;;;;;;;;;;;;;;;;;;;;;;;0CAIrF,6LAAC;gCAAI,WAAU;;kDACX,6LAAC;wCAAK,WAAU;kDAA0B;;;;;;kDAC1C,6LAAC;wCAAK,WAAU;kDAA2C,IAAA,+HAAY,EAAC;;;;;;;;;;;;;;;;;;kCAIhF,6LAAC;wBAAI,WAAU;;0CAEX,6LAAC;gCAAI,WAAU;;kDACX,6LAAC;wCAAI,WAAU;kDACX,cAAA,6LAAC;4CAAG,WAAU;sDAA0D;;;;;;;;;;;kDAE5E,6LAAC;wCAAI,WAAU;kDACX,cAAA,6LAAC;4CAAI,WAAU;;8DACX,6LAAC;oDAAK,WAAU;8DAAwB;;;;;;8DACxC,6LAAC;oDAAK,WAAU;8DAA0B,IAAA,+HAAY,EAAC,YAAY,OAAO;;;;;;;;;;;;;;;;;kDAGlF,6LAAC;wCAAI,WAAU;;0DACX,6LAAC;gDAAK,WAAU;0DAA0B;;;;;;0DAC1C,6LAAC;gDAAK,WAAU;0DAAkC,IAAA,+HAAY,EAAC,YAAY,OAAO;;;;;;;;;;;;;;;;;;0CAK1F,6LAAC;gCAAI,WAAU;;kDACX,6LAAC;wCAAE,WAAU;kDAAuD;;;;;;kDACpE,6LAAC;wCAAG,WAAW,CAAC,uCAAuC,EAAE,UAAU,IAAI,eAAe,gBAAgB;kDACjG,IAAA,+HAAY,EAAC;;;;;;kDAElB,6LAAC;wCAAE,WAAU;kDAA6B;;;;;;kDAC1C,6LAAC;wCAAI,WAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMvC;GAnHwB;KAAA"}},
    {"offset": {"line": 1933, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Bobing%20Corp/Desktop/bobing-ssot-new/components/finance/CoaView.js"],"sourcesContent":["// app/finance-accounts/page.js\r\n\"use client\";\r\nimport { useState, useEffect } from 'react';\r\nimport { db } from '@/lib/firebase';\r\nimport { collection, getDocs, doc, updateDoc, deleteDoc, query, orderBy, serverTimestamp, writeBatch } from 'firebase/firestore';\r\nimport * as XLSX from 'xlsx';\r\n\r\nexport default function CoaPage() {\r\n    const [accounts, setAccounts] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => { fetchData(); }, []);\r\n\r\n    const fetchData = async () => {\r\n        try {\r\n            const q = query(collection(db, \"chart_of_accounts\"), orderBy(\"code\", \"asc\"));\r\n            const snap = await getDocs(q);\r\n            const data = [];\r\n            snap.forEach(d => data.push({id: d.id, ...d.data()}));\r\n            setAccounts(data);\r\n        } catch (e) { console.error(e); } finally { setLoading(false); }\r\n    };\r\n\r\n    const toggleStatus = async (id, current) => {\r\n        try {\r\n            const newState = current === 'Aktif' ? 'Nonaktif' : 'Aktif';\r\n            await updateDoc(doc(db, \"chart_of_accounts\", id), { status: newState, updated_at: serverTimestamp() });\r\n            fetchData();\r\n        } catch (e) { alert(e.message); }\r\n    };\r\n\r\n    const deleteAccount = async (id) => {\r\n        if(confirm(\"Hapus akun ini?\")) {\r\n            await deleteDoc(doc(db, \"chart_of_accounts\", id));\r\n            fetchData();\r\n        }\r\n    };\r\n\r\n    const handleImport = (e) => {\r\n        const file = e.target.files[0];\r\n        if (!file) return;\r\n\r\n        const reader = new FileReader();\r\n        reader.onload = async (ev) => {\r\n            try {\r\n                const data = ev.target.result;\r\n                const workbook = XLSX.read(data, { type: 'array' });\r\n                const sheet = workbook.Sheets[workbook.SheetNames[0]];\r\n                const rows = XLSX.utils.sheet_to_json(sheet);\r\n\r\n                if (rows.length === 0) throw new Error(\"File kosong\");\r\n                if (!rows[0]['AccountID']) throw new Error(\"Format salah! Kolom harus: AccountID, Account Name, Account Type\");\r\n                if (!confirm(`Import ${rows.length} akun?`)) return;\r\n\r\n                const batch = writeBatch(db);\r\n                rows.forEach(row => {\r\n                    const docRef = doc(db, \"chart_of_accounts\", String(row['AccountID']));\r\n                    batch.set(docRef, {\r\n                        code: String(row['AccountID']),\r\n                        name: row['Account Name'],\r\n                        category: row['Account Type'],\r\n                        status: 'Aktif',\r\n                        updated_at: serverTimestamp()\r\n                    });\r\n                });\r\n\r\n                await batch.commit();\r\n                alert(\"Import Berhasil!\");\r\n                fetchData();\r\n            } catch (err) { alert(\"Gagal Import: \" + err.message); }\r\n            e.target.value = '';\r\n        };\r\n        reader.readAsArrayBuffer(file);\r\n    };\r\n\r\n    return (\r\n        <div className=\"max-w-7xl mx-auto space-y-6 fade-in pb-20\">\r\n            <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4\">\r\n                <div>\r\n                    <h2 className=\"text-2xl font-semibold text-gray-900 tracking-tight\">Chart of Accounts</h2>\r\n                    <p className=\"text-sm text-gray-500 mt-1\">Master financial accounts (Assets, Liabilities, Equity).</p>\r\n                </div>\r\n                <label className=\"btn-secondary cursor-pointer\">\r\n                    <svg className=\"w-5 h-5 text-brand-600\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12\"/></svg>\r\n                    <span>Import CSV / Excel</span>\r\n                    <input type=\"file\" className=\"hidden\" accept=\".csv, .xlsx\" onChange={handleImport} />\r\n                </label>\r\n            </div>\r\n\r\n            <div className=\"card p-0 overflow-hidden\">\r\n                <div className=\"table-wrapper border-0 shadow-none rounded-none\">\r\n                    <table className=\"table-modern\">\r\n                        <thead>\r\n                            <tr>\r\n                                <th className=\"pl-6\">Code</th>\r\n                                <th>Account Name</th>\r\n                                <th>Category</th>\r\n                                <th className=\"text-center\">Status</th>\r\n                                <th className=\"text-right pr-6\">Actions</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {loading ? <tr><td colSpan=\"5\" className=\"text-center py-12 text-gray-400\">Loading...</td></tr> : accounts.map(acc => {\r\n                                let catColor = 'badge-neutral';\r\n                                if (acc.category.includes('Aset')) catColor = 'bg-blue-50 text-blue-700 border-blue-100';\r\n                                if (acc.category.includes('Pendapatan')) catColor = 'bg-emerald-50 text-emerald-700 border-emerald-100';\r\n                                if (acc.category.includes('Beban')) catColor = 'bg-rose-50 text-rose-700 border-rose-100';\r\n                                if (acc.category.includes('Kewajiban') || acc.category.includes('Modal')) catColor = 'bg-amber-50 text-amber-700 border-amber-100';\r\n\r\n                                return (\r\n                                    <tr key={acc.id}>\r\n                                        <td className=\"pl-6 font-mono font-bold text-brand-600\">{acc.code}</td>\r\n                                        <td className=\"font-medium text-gray-800\">{acc.name}</td>\r\n                                        <td><span className={`badge ${catColor}`}>{acc.category}</span></td>\r\n                                        \r\n                                        <td className=\"text-center\">\r\n                                            <button onClick={() => toggleStatus(acc.id, acc.status)} \r\n                                                className={`relative inline-flex h-5 w-9 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-brand-500 focus:ring-offset-2 ${acc.status === 'Aktif' ? 'bg-emerald-500' : 'bg-gray-200'}`}\r\n                                            >\r\n                                                <span className={`inline-block h-3 w-3 transform rounded-full bg-white transition-transform ${acc.status === 'Aktif' ? 'translate-x-5' : 'translate-x-1'}`} />\r\n                                            </button>\r\n                                        </td>\r\n\r\n                                        <td className=\"text-right pr-6\">\r\n                                            <button onClick={() => deleteAccount(acc.id)} className=\"text-xs font-bold text-red-400 hover:text-red-600\">Del</button>\r\n                                        </td>\r\n                                    </tr>\r\n                                );\r\n                            })}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2308, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Bobing%20Corp/Desktop/bobing-ssot-new/app/finance/page.js"],"sourcesContent":["// app/finance/page.js\r\n\"use client\";\r\nimport { useState } from 'react';\r\nimport CashFlowView from '@/components/finance/CashFlowView';\r\nimport ProfitLossView from '@/components/finance/ProfitLossView';\r\nimport BalanceSheetView from '@/components/finance/BalanceSheetView';\r\nimport CoaView from '@/components/finance/CoaView';\r\n\r\nexport default function FinanceHubPage() {\r\n  const [activeTab, setActiveTab] = useState('cashflow');\r\n\r\n  const tabs = [\r\n    { id: 'cashflow', label: 'Arus Kas', icon: '' },\r\n    { id: 'pl', label: 'Laba Rugi', icon: '' },\r\n    { id: 'balance', label: 'Neraca', icon: '' },\r\n    { id: 'coa', label: 'Akun (COA)', icon: '' },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"max-w-7xl mx-auto space-y-6 fade-in pb-20\">\r\n      <div className=\"flex flex-col md:flex-row justify-between items-end md:items-center gap-4\">\r\n        <div>\r\n            <h2 className=\"text-2xl font-bold text-gray-900 tracking-tight\">Pusat Keuangan</h2>\r\n            <p className=\"text-sm text-gray-500 mt-1\">Laporan & Manajemen Keuangan Terpadu.</p>\r\n        </div>\r\n        <div className=\"bg-white p-1 rounded-xl border border-gray-200 shadow-sm flex overflow-x-auto max-w-full no-scrollbar\">\r\n          {tabs.map((tab) => (\r\n            <button\r\n              key={tab.id}\r\n              onClick={() => setActiveTab(tab.id)}\r\n              className={`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-semibold transition-all whitespace-nowrap ${\r\n                activeTab === tab.id\r\n                  ? 'bg-emerald-50 text-emerald-700 shadow-sm ring-1 ring-emerald-200'\r\n                  : 'text-gray-500 hover:text-gray-700 hover:bg-gray-50'\r\n              }`}\r\n            >\r\n              <span>{tab.icon}</span>\r\n              {tab.label}\r\n            </button>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"min-h-[500px]\">\r\n        {activeTab === 'cashflow' && <CashFlowView />}\r\n        {activeTab === 'pl' && <ProfitLossView />}\r\n        {activeTab === 'balance' && <BalanceSheetView />}\r\n        {activeTab === 'coa' && <CoaView />}\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"AAAA,sBAAsB;;;;;;AAEtB;AACA;AACA;AACA;AACA;;;AALA;;;;;;AAOe,SAAS;;IACtB,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAC;IAE3C,MAAM,OAAO;QACX;YAAE,IAAI;YAAY,OAAO;YAAY,MAAM;QAAK;QAChD;YAAE,IAAI;YAAM,OAAO;YAAa,MAAM;QAAK;QAC3C;YAAE,IAAI;YAAW,OAAO;YAAU,MAAM;QAAK;QAC7C;YAAE,IAAI;YAAO,OAAO;YAAc,MAAM;QAAM;KAC/C;IAED,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;;0CACG,6LAAC;gCAAG,WAAU;0CAAkD;;;;;;0CAChE,6LAAC;gCAAE,WAAU;0CAA6B;;;;;;;;;;;;kCAE9C,6LAAC;wBAAI,WAAU;kCACZ,KAAK,GAAG,CAAC,CAAC,oBACT,6LAAC;gCAEC,SAAS,IAAM,aAAa,IAAI,EAAE;gCAClC,WAAW,CAAC,oGAAoG,EAC9G,cAAc,IAAI,EAAE,GAChB,qEACA,sDACJ;;kDAEF,6LAAC;kDAAM,IAAI,IAAI;;;;;;oCACd,IAAI,KAAK;;+BATL,IAAI,EAAE;;;;;;;;;;;;;;;;0BAenB,6LAAC;gBAAI,WAAU;;oBACZ,cAAc,4BAAc,6LAAC,mJAAY;;;;;oBACzC,cAAc,sBAAQ,6LAAC,qJAAc;;;;;oBACrC,cAAc,2BAAa,6LAAC,uJAAgB;;;;;oBAC5C,cAAc,uBAAS,6LAAC,8IAAO;;;;;;;;;;;;;;;;;AAIxC;GA3CwB;KAAA"}}]
}