{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Bobing%20Corp/Desktop/bobing-ssot-new/lib/utils.js"],"sourcesContent":["// lib/utils.js\r\nexport const formatRupiah = (n) => {\r\n  return new Intl.NumberFormat('id-ID', {\r\n    style: 'currency',\r\n    currency: 'IDR',\r\n    minimumFractionDigits: 0\r\n  }).format(n);\r\n};\r\n\r\nexport const sizeRank = ['ALL','ALL SIZE','ALLSIZE','XXXS','XXS','XS','S','M','L','XL','XXL','2XL','3XL','XXXL','4XL','5XL'];\r\n\r\nexport const sortBySize = (variantA, variantB) => {\r\n  const sizeA = (variantA.size || '').toUpperCase().trim();\r\n  const sizeB = (variantB.size || '').toUpperCase().trim();\r\n  const idxA = sizeRank.indexOf(sizeA);\r\n  const idxB = sizeRank.indexOf(sizeB);\r\n  \r\n  if (idxA !== -1 && idxB !== -1) return idxA - idxB;\r\n  if (idxA !== -1) return -1; \r\n  if (idxB !== -1) return 1;\r\n  \r\n  const colorCompare = (variantA.color || '').localeCompare(variantB.color || '');\r\n  if (colorCompare !== 0) return colorCompare;\r\n  \r\n  return (variantA.sku || '').localeCompare(variantB.sku || '');\r\n};"],"names":[],"mappings":"AAAA,eAAe;;;;;;;;;AACR,MAAM,eAAe,CAAC;IAC3B,OAAO,IAAI,KAAK,YAAY,CAAC,SAAS;QACpC,OAAO;QACP,UAAU;QACV,uBAAuB;IACzB,GAAG,MAAM,CAAC;AACZ;AAEO,MAAM,WAAW;IAAC;IAAM;IAAW;IAAU;IAAO;IAAM;IAAK;IAAI;IAAI;IAAI;IAAK;IAAM;IAAM;IAAM;IAAO;IAAM;CAAM;AAErH,MAAM,aAAa,CAAC,UAAU;IACnC,MAAM,QAAQ,CAAC,SAAS,IAAI,IAAI,EAAE,EAAE,WAAW,GAAG,IAAI;IACtD,MAAM,QAAQ,CAAC,SAAS,IAAI,IAAI,EAAE,EAAE,WAAW,GAAG,IAAI;IACtD,MAAM,OAAO,SAAS,OAAO,CAAC;IAC9B,MAAM,OAAO,SAAS,OAAO,CAAC;IAE9B,IAAI,SAAS,CAAC,KAAK,SAAS,CAAC,GAAG,OAAO,OAAO;IAC9C,IAAI,SAAS,CAAC,GAAG,OAAO,CAAC;IACzB,IAAI,SAAS,CAAC,GAAG,OAAO;IAExB,MAAM,eAAe,CAAC,SAAS,KAAK,IAAI,EAAE,EAAE,aAAa,CAAC,SAAS,KAAK,IAAI;IAC5E,IAAI,iBAAiB,GAAG,OAAO;IAE/B,OAAO,CAAC,SAAS,GAAG,IAAI,EAAE,EAAE,aAAa,CAAC,SAAS,GAAG,IAAI;AAC5D"}},
    {"offset": {"line": 54, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Bobing%20Corp/Desktop/bobing-ssot-new/app/supplier-sessions/page.js"],"sourcesContent":["\"use client\";\r\nimport { useState, useEffect, useRef } from 'react';\r\nimport { db, auth } from '@/lib/firebase';\r\nimport { collection, getDocs, doc, runTransaction, query, orderBy, serverTimestamp, limit } from 'firebase/firestore';\r\nimport { sortBySize } from '@/lib/utils';\r\nimport Sortable from 'sortablejs';\r\nimport { Portal } from '@/lib/usePortal';\r\n\r\n// Cache Configuration\r\nconst CACHE_KEY = 'lumina_virtual_stock_master';\r\nconst CACHE_DURATION = 5 * 60 * 1000; \r\n\r\nexport default function VirtualStockPage() {\r\n    const [suppliers, setSuppliers] = useState([]);\r\n    const [warehouses, setWarehouses] = useState([]);\r\n    const [products, setProducts] = useState([]);\r\n    const [variants, setVariants] = useState([]);\r\n    const [snapshots, setSnapshots] = useState({});\r\n    \r\n    const [selectedSupplierId, setSelectedSupplierId] = useState('');\r\n    const [visibleProducts, setVisibleProducts] = useState([]);\r\n    const gridRef = useRef(null);\r\n    \r\n    const [modalOpen, setModalOpen] = useState(false);\r\n    const [currentModalProd, setCurrentModalProd] = useState(null);\r\n    const [modalUpdates, setModalUpdates] = useState({});\r\n\r\n    useEffect(() => { fetchData(); }, []);\r\n\r\n    // Set default supplier\r\n    useEffect(() => {\r\n        if (suppliers.length > 0 && !selectedSupplierId) {\r\n            const masTohir = suppliers.find(s => s.name === 'Mas Tohir');\r\n            if (masTohir) {\r\n                setSelectedSupplierId(masTohir.id);\r\n            }\r\n        }\r\n    }, [suppliers]);\r\n\r\n    // Trigger load products when supplier selected\r\n    useEffect(() => {\r\n        if(selectedSupplierId) {\r\n            handleSupplierChange(selectedSupplierId);\r\n        }\r\n    }, [selectedSupplierId]);\r\n\r\n    useEffect(() => {\r\n        if (gridRef.current && visibleProducts.length > 0) {\r\n            new Sortable(gridRef.current, { animation: 150, ghostClass: 'opacity-50' });\r\n        }\r\n    }, [visibleProducts]);\r\n\r\n    const fetchData = async () => {\r\n        try {\r\n            // 1. Cek Cache\r\n            const cached = sessionStorage.getItem(CACHE_KEY);\r\n            if (cached) {\r\n                const { suppliers, warehouses, products, variants, timestamp } = JSON.parse(cached);\r\n                if (Date.now() - timestamp < CACHE_DURATION) {\r\n                    setSuppliers(suppliers);\r\n                    setWarehouses(warehouses);\r\n                    setProducts(products);\r\n                    setVariants(variants);\r\n                    // Snapshots tetap fetch fresh\r\n                    const sSnap = await getDocs(collection(db, \"stock_snapshots\"));\r\n                    const snaps = {}; \r\n                    sSnap.forEach(d => snaps[d.id] = d.data());\r\n                    setSnapshots(snaps);\r\n                    return;\r\n                }\r\n            }\r\n\r\n            // 2. Fetch Fresh\r\n            const [sSupp, sWh, sProd, sVar, sSnap] = await Promise.all([\r\n                getDocs(query(collection(db, \"suppliers\"), orderBy(\"name\"))),\r\n                getDocs(collection(db, \"warehouses\")),\r\n                getDocs(query(collection(db, \"products\"), limit(100))), // Limit products\r\n                getDocs(query(collection(db, \"product_variants\"), orderBy(\"sku\"))),\r\n                getDocs(collection(db, \"stock_snapshots\"))\r\n            ]);\r\n\r\n            const supps = []; sSupp.forEach(d => supps.push({id: d.id, ...d.data()}));\r\n            const whs = []; sWh.forEach(d => whs.push({id: d.id, ...d.data()}));\r\n            const prods = []; sProd.forEach(d => prods.push({id: d.id, ...d.data()}));\r\n            const vars = []; sVar.forEach(d => vars.push({id: d.id, ...d.data()}));\r\n            const snaps = {}; sSnap.forEach(d => snaps[d.id] = d.data());\r\n\r\n            setSuppliers(supps);\r\n            setWarehouses(whs);\r\n            setProducts(prods);\r\n            setVariants(vars);\r\n            setSnapshots(snaps);\r\n\r\n            // 3. Save Cache (Exclude snapshots because they change frequently)\r\n            sessionStorage.setItem(CACHE_KEY, JSON.stringify({\r\n                suppliers: supps,\r\n                warehouses: whs,\r\n                products: prods,\r\n                variants: vars,\r\n                timestamp: Date.now()\r\n            }));\r\n\r\n        } catch (e) { console.error(e); }\r\n    };\r\n\r\n    const handleSupplierChange = (suppId) => {\r\n        if (!suppId) { setVisibleProducts([]); return; }\r\n        const wh = warehouses.find(w => w.type === 'virtual_supplier' && w.supplier_id === suppId);\r\n        \r\n        if (!wh) { \r\n            // Don't alert immediately on auto-select to avoid spam\r\n            // alert(\"Supplier ini belum punya Gudang Virtual.\"); \r\n            setVisibleProducts([]);\r\n            return; \r\n        }\r\n\r\n        const grouped = {};\r\n        variants.forEach(v => {\r\n            if (!grouped[v.product_id]) {\r\n                const p = products.find(x => x.id === v.product_id);\r\n                if(p) grouped[v.product_id] = { ...p, variants: [], totalStock: 0 };\r\n            }\r\n            if(grouped[v.product_id]) {\r\n                grouped[v.product_id].variants.push(v);\r\n                grouped[v.product_id].totalStock += (snapshots[`${v.id}_${wh.id}`]?.qty || 0);\r\n            }\r\n        });\r\n        setVisibleProducts(Object.values(grouped).sort((a,b) => (a.base_sku||'').localeCompare(b.base_sku||'')));\r\n    };\r\n\r\n    const openModal = (prod) => { setCurrentModalProd(prod); setModalUpdates({}); setModalOpen(true); };\r\n\r\n    const saveModal = async () => {\r\n        const wh = warehouses.find(w => w.type === 'virtual_supplier' && w.supplier_id === selectedSupplierId);\r\n        const updates = [];\r\n        Object.keys(modalUpdates).forEach(vid => {\r\n            const real = parseInt(modalUpdates[vid]);\r\n            const current = snapshots[`${vid}_${wh.id}`]?.qty || 0;\r\n            if (!isNaN(real) && real !== current) updates.push({ variantId: vid, real, diff: real - current });\r\n        });\r\n        if(updates.length === 0) { setModalOpen(false); return; }\r\n\r\n        try {\r\n            await runTransaction(db, async (t) => {\r\n                const sessRef = doc(collection(db, \"supplier_stock_sessions\"));\r\n                t.set(sessRef, { supplier_id: selectedSupplierId, warehouse_id: wh.id, date: serverTimestamp(), created_by: user?.email, type: 'overwrite' });\r\n                for(const up of updates) {\r\n                    const k = `${up.variantId}_${wh.id}`;\r\n                    const snapRef = doc(db, \"stock_snapshots\", k);\r\n                    const sDoc = await t.get(snapRef);\r\n                    t.set(doc(collection(db, \"stock_movements\")), { variant_id: up.variantId, warehouse_id: wh.id, type: 'supplier_sync', qty: up.diff, ref_id: sessRef.id, ref_type: 'supplier_session', date: serverTimestamp() });\r\n                    if(sDoc.exists()) t.update(snapRef, { qty: up.real, updated_at: serverTimestamp() }); else t.set(snapRef, { id: k, variant_id: up.variantId, warehouse_id: wh.id, qty: up.real, updated_at: serverTimestamp() });\r\n                }\r\n            });\r\n            alert(\"Stok terupdate!\"); \r\n            setModalOpen(false); \r\n            // Invalidate cache stock\r\n            sessionStorage.removeItem('lumina_inventory_data'); \r\n            fetchData(); // Refresh snapshots\r\n        } catch(e) { alert(e.message); }\r\n    };\r\n\r\n    return (\r\n        <div className=\"max-w-7xl mx-auto space-y-6 fade-in pb-20\">\r\n            <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4\">\r\n                <div>\r\n                    <h2 className=\"text-2xl font-display font-bold text-lumina-text tracking-tight\">Virtual Stock Map</h2>\r\n                    <p className=\"text-sm text-lumina-muted mt-1 font-light\">Drag & Drop cards to organize supplier products.</p>\r\n                </div>\r\n                <select className=\"input-luxury w-full sm:w-64 font-medium\" value={selectedSupplierId} onChange={(e) => setSelectedSupplierId(e.target.value)}>\r\n                    <option value=\"\">-- Select Supplier --</option>\r\n                    {suppliers.map(s => <option key={s.id} value={s.id}>{s.name}</option>)}\r\n                </select>\r\n            </div>\r\n\r\n            {selectedSupplierId && (\r\n                <div ref={gridRef} className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4\">\r\n                    {visibleProducts.map(p => (\r\n                        <div key={p.id} className=\"card-luxury p-5 cursor-grab active:cursor-grabbing hover:border-lumina-gold/50 transition-all relative group\" onClick={() => openModal(p)}>\r\n                            <span className=\"text-[10px] font-bold bg-lumina-base text-lumina-gold px-2 py-1 rounded uppercase tracking-wide border border-lumina-border\">{p.base_sku}</span>\r\n                            <h3 className=\"text-sm font-bold text-lumina-text mt-3 mb-4 line-clamp-2 leading-relaxed group-hover:text-lumina-gold transition-colors\">{p.name}</h3>\r\n                            <div className=\"flex justify-between items-end border-t border-lumina-border pt-3\">\r\n                                <span className=\"text-xs text-lumina-muted\">{p.variants.length} Items</span>\r\n                                <span className={`text-lg font-bold ${p.totalStock > 0 ? 'text-emerald-400' : 'text-lumina-border'}`}>{p.totalStock}</span>\r\n                            </div>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            )}\r\n\r\n            {/* Update Stock Modal (Centered Dark) */}\r\n            <Portal>\r\n            {modalOpen && currentModalProd && (\r\n                <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4 fade-in\">\r\n                    <div className=\"bg-lumina-surface border border-lumina-border rounded-2xl shadow-2xl w-full max-w-3xl max-h-[80vh] flex flex-col ring-1 ring-lumina-gold/20\">\r\n                        <div className=\"p-6 border-b border-lumina-border flex justify-between items-center bg-lumina-surface rounded-t-2xl\">\r\n                            <div>\r\n                                <h3 className=\"text-xl font-bold text-white\">{currentModalProd.name}</h3>\r\n                                <p className=\"text-xs text-lumina-muted font-mono mt-1\">{currentModalProd.base_sku}</p>\r\n                            </div>\r\n                            <button onClick={() => setModalOpen(false)} className=\"text-2xl text-lumina-muted hover:text-white transition-colors\">&times;</button>\r\n                        </div>\r\n                        \r\n                        <div className=\"flex-1 overflow-y-auto p-0 bg-lumina-base custom-scrollbar\">\r\n                            <table className=\"table-dark\">\r\n                                <thead className=\"sticky top-0 z-10 bg-lumina-surface shadow-md border-b border-lumina-border\">\r\n                                    <tr>\r\n                                        <th className=\"pl-6\">Varian</th>\r\n                                        <th className=\"text-center\">System</th>\r\n                                        <th className=\"text-center w-32 bg-lumina-highlight/30\">Real</th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody>\r\n                                    {currentModalProd.variants.sort(sortBySize).map(v => {\r\n                                        const whId = warehouses.find(w => w.supplier_id === selectedSupplierId)?.id;\r\n                                        const qty = snapshots[`${v.id}_${whId}`]?.qty || 0;\r\n                                        return (\r\n                                            <tr key={v.id} className=\"hover:bg-lumina-highlight/20 transition-colors\">\r\n                                                <td className=\"pl-6 font-medium text-lumina-text\">\r\n                                                    {v.color} / {v.size} <span className=\"text-xs font-mono text-lumina-muted ml-2\">{v.sku}</span>\r\n                                                </td>\r\n                                                <td className=\"text-center font-mono text-lumina-muted\">{qty}</td>\r\n                                                <td className=\"bg-lumina-highlight/20 p-2 text-center\">\r\n                                                    <input \r\n                                                        type=\"number\" \r\n                                                        className=\"w-24 text-center bg-lumina-base border border-lumina-border rounded-lg py-1.5 font-bold text-lumina-gold focus:ring-1 focus:ring-lumina-gold outline-none\" \r\n                                                        placeholder={qty}\r\n                                                        onChange={(e) => setModalUpdates({...modalUpdates, [v.id]: e.target.value})} \r\n                                                    />\r\n                                                </td>\r\n                                            </tr>\r\n                                        )\r\n                                    })}\r\n                                </tbody>\r\n                            </table>\r\n                        </div>\r\n                        \r\n                        <div className=\"p-6 border-t border-lumina-border bg-lumina-surface rounded-b-2xl flex justify-end\">\r\n                            <button onClick={saveModal} className=\"btn-gold\">Save Updates</button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n            </Portal>\r\n        </div>\r\n    );\r\n}"],"names":[],"mappings":"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"}}]
}